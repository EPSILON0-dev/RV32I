# System on Chip (SoC)

This directory contains the hardware description and related files for a simple RISC-V based SoC implementation.

## Overview of Files

- **gen.py**: Python script that converts a binary file (such as a bootloader hex file) into a memory image used by the ROM module (`rom.sv`).
- **rom.sv**: A 512x32-bit ROM module that stores the bootloader program. The contents are autogenerated by `gen.py`.
- **top.sv**: The top-level SystemVerilog module integrating the SoC components:
  - **CPU**: The RISC-V CPU core.
  - **Bootloader ROM**: Provides the initial program code to the CPU.
  - **Closely Coupled Memory (CCM)**: A 32 KB fast memory region for data and instructions.
  - **GPIO**: General Purpose Input/Output registers for controlling LEDs, buttons, and other pins.
  - **UART**: Serial communication interface for transmitting and receiving data.
  - **Timer**: A simple timer register incrementing every clock cycle.
- **uart.sv**: A simple UART module adapted from the PicoSoC project, handling serial data transmission and reception.

## Memory Map

| Start Address | Size  | Access | Description                  |
|:-------------:|:-----:|:------:|-----------------------------|
| 0x00000000    | 512 B | R-X    | Bootloader ROM               |
| 0x00008000    | 32 KB | RWX    | Closely Coupled Memory (CCM) |
| 0x00020000    | 4 B   | RW-    | GPIO Direction Register      |
| 0x00020004    | 4 B   | R--    | GPIO Input Register          |
| 0x00020008    | 4 B   | RW-    | GPIO Output Register         |
| 0x00020010    | 4 B   | RW-    | UART Baud Rate Divider       |
| 0x00020014    | 4 B   | RW-    | UART Transmit Data Register  |
| 0x00020018    | 4 B   | RW-    | UART Receive Data Register   |
| 0x0002001C    | 4 B   | R--    | UART Wait Status Register    |
| 0x00020020    | 4 B   | R--    | Timer Register               |

## GPIO Pinout

| Pin  | Location | Function      | Pin  | Location | Function  |
|:-----|:--------:|:--------------|:-----|:--------:|:----------|
| G0   | --       | LED 0         | G16  | 30       | GPIO      |
| G1   | --       | LED 1         | G17  | 33       | GPIO      |
| G2   | --       | LED 2         | G18  | 34       | GPIO      |
| G3   | --       | LED 3         | G19  | 40       | GPIO      |
| G4   | --       | LED 4         | G20  | 35       | GPIO      |
| G5   | --       | LED 5         | G21  | 41       | GPIO      |
| G6   | --       | User Button   | G22  | 42       | GPIO      |
| G7   | 38       | TF_CS         | G23  | 51       | GPIO      |
| G8   | 37       | TF_MOSI       | G24  | 53       | GPIO      |
| G9   | 36       | TF_SCLK       | G25  | 57       | GPIO      |
| G10  | 39       | TF_MISO       | G26  | 68       | GPIO      |
| G11  | 25       | GPIO          | G27  | 69       | GPIO      |
| G12  | 26       | GPIO          | G28  | 63       | GPIO      |
| G13  | 27       | GPIO          | G29  | 77       | GPIO      |
| G14  | 28       | GPIO          | G30  | 76       | GPIO      |
| G15  | 29       | GPIO          | G31  | 48       | GPIO      |

### Notes

1. LEDs are active high.  
2. User button is active low.
